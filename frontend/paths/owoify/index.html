<!DOCTYPE html>
<html lang="en-US">
    <head>
        <title>OwOify</title>
        <meta content="OwOify" property="og:title">
        <meta content="Neko's OwOify!" property="og:description">
        <meta name="description" content="Neko's OwOify!">
        <meta name="robots" content="index, follow">
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="/assets/style.css">
    </head>
    <body>
        <h1>OwOify text!</h1>
    
        <textarea id="input" rows="8" oninput="convert()"></textarea>
    
        <h1>Output</h1>

        <textarea id="output" rows="8" readonly></textarea>

        <button onclick="copyOutput()">Copy</button>
    
        <script>
            const inputElement = document.getElementById('input')
            const outputElement = document.getElementById('output')
            const faces = [
                'OwO',
                'owo',
                'UwU',
                'uwu',
                '>w<',
                ':3'
            ]
    
            function convert() {
                const inputText = inputElement.value
                const convertedText = inputText
                    
    
                outputElement.value = parse(convertedText)
            }
    
            function copyOutput() {
                navigator.clipboard.writeText(outputElement.value.replace(/\<br\>/g, '\n'))
            }

            function parse(text) {
                return text
                    .replace(/\b([Hh])i\b/g, `$1i${Math.random() < 0.5 ? '' : 'i'}~~`)
                    .replace(/(?:r(?! )|l(?!i))/g, 'w')
                    .replace(/(?:R|L(?!i))/g, 'W')
                    .replace(/n([aeiou])/g, 'ny$1')
                    .replace(/N([aeiou])/g, 'Ny$1')
                    .replace(/N([AEIOU])/g, 'NY$1')
                    .replace(/ove/g, 'uv')
                    .replace(/wm/g, 'wrm')
                    .replace(/cus/g, 'cuws')
                    .replace(/cod/g, 'cowd')
                    .replace(/so/g, 'swo')
                    .replace(/tom/g, 'towm')
                    .replace(/con/g, 'cown')
                    .replace(/ww/g, 'www')
                    .replace(/er\b/, 'wer')
                    .replace(/(?<!w)ent\b/g, 'went')
                    .replace(/bettwer/g, 'kawaii')
                    .replace(/pwease/g, 'senpai')
                    .replace(/Hewwwo/g, 'Konnichiwa')
                    .replace(/hewwwo/g, 'konnichiwa')
                    .replace(/[.?!]+/g, (match) => {
                        const randomFace = faces[Math.floor(Math.random() * faces.length)]
                        return match.endsWith(' ') ? ` ${randomFace} ` : ` ${randomFace}`
                    })
                    .replace(/\\n/g, '<br>')
            }
        </script>
    </body>
</html>